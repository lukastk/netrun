# AUTOGENERATED! DO NOT EDIT! File to edit: nbs/tests/03_pool/test_base.ipynb

__all__ = ['test_pool_already_started', 'test_pool_error', 'test_pool_is_protocol', 'test_pool_not_started', 'test_worker_error', 'test_worker_id_is_int', 'test_worker_message_dataclass', 'test_worker_message_equality']

# %% nbs/tests/03_pool/test_base.ipynb 2
import pytest
from netrun.pool.base import (
    WorkerId,
    WorkerMessage,
    Pool,
    PoolError,
    PoolNotStarted,
    PoolAlreadyStarted,
    WorkerError,
)

# %% nbs/tests/03_pool/test_base.ipynb 4
def test_worker_id_is_int():
    """WorkerId should be an int alias."""
    worker_id: WorkerId = 42
    assert isinstance(worker_id, int)

# %% nbs/tests/03_pool/test_base.ipynb 6
def test_worker_message_dataclass():
    """Test WorkerMessage dataclass."""
    msg = WorkerMessage(worker_id=1, key="test", data={"value": 42})
    assert msg.worker_id == 1
    assert msg.key == "test"
    assert msg.data == {"value": 42}

# %% nbs/tests/03_pool/test_base.ipynb 8
def test_worker_message_equality():
    """Test WorkerMessage equality."""
    msg1 = WorkerMessage(worker_id=1, key="test", data="data")
    msg2 = WorkerMessage(worker_id=1, key="test", data="data")
    msg3 = WorkerMessage(worker_id=2, key="test", data="data")

    assert msg1 == msg2
    assert msg1 != msg3

# %% nbs/tests/03_pool/test_base.ipynb 11
def test_pool_error():
    """Test PoolError exception."""
    with pytest.raises(PoolError):
        raise PoolError("Test error")

# %% nbs/tests/03_pool/test_base.ipynb 13
def test_pool_not_started():
    """Test PoolNotStarted exception."""
    with pytest.raises(PoolNotStarted):
        raise PoolNotStarted("Pool not started")

    # Should be subclass of PoolError
    assert issubclass(PoolNotStarted, PoolError)

# %% nbs/tests/03_pool/test_base.ipynb 15
def test_pool_already_started():
    """Test PoolAlreadyStarted exception."""
    with pytest.raises(PoolAlreadyStarted):
        raise PoolAlreadyStarted("Pool already started")

    # Should be subclass of PoolError
    assert issubclass(PoolAlreadyStarted, PoolError)

# %% nbs/tests/03_pool/test_base.ipynb 17
def test_worker_error():
    """Test WorkerError exception."""
    err = WorkerError(worker_id=5, message="Worker failed")
    assert err.worker_id == 5
    assert "Worker failed" in str(err)

    # Should be subclass of PoolError
    assert issubclass(WorkerError, PoolError)

# %% nbs/tests/03_pool/test_base.ipynb 20
def test_pool_is_protocol():
    """Pool should be a Protocol."""
    # Pool is decorated with @runtime_checkable
    assert hasattr(Pool, '__protocol_attrs__') or isinstance(Pool, type)
